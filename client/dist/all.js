"use strict";angular.module("jamestownChicken",["ui.router"]).run(["Auth","$window","$rootScope","$location",function(o,t,n,u){n.loggedIn=o.isAuthLite()}]);
"use strict";angular.module("jamestownChicken").config(["$stateProvider","$urlRouterProvider",function(s,e){e.otherwise("/home"),s.state("home",{url:"/home",templateUrl:"../../templates/home/index.html",controller:"MainController as main",css:"../../content/css.css"}).state("signup",{url:"/signup",templateUrl:"../../templates/signup/signup.html",controller:"SignupController as signup",css:"../../content/css.css"}).state("signin",{url:"/signin",templateUrl:"../../templates/signin/signin.html",controller:"SigninController as signin",css:"../../content/css.css"}).state("passwordreset",{url:"/passwordreset",templateUrl:"../../templates/passwordreset/passwordreset.html",controller:"PassWordReset as reset",css:"../../content/css.css"})}]);
"use strict";angular.module("jamestownChicken").controller("MainController",["$rootScope","Auth",function(o,t){o.bg=!0,this.out=function(){t.signout()}}]);
"use strict";angular.module("jamestownChicken").controller(function(){this.submit=function(){this.email}});
"use strict";angular.module("jamestownChicken").controller("SigninController",["$rootScope","$http","$window","$state","Auth",function(s,t,i,o,n){this.user,this.password,this.submit=function(){n.signin(this.user,this.password),this.user="",this.password=""}}]);
"use strict";angular.module("jamestownChicken").controller("SignupController",["$rootScope","$http","$window","$state","Auth",function(s,t,i,e,o){this.user,this.password,this.retype,this.email,this.submit=function(){o.signup(this.user,this.password,this.email),this.user="",this.password="",this.email=""}}]);
"use strict";angular.module("jamestownChicken").directive("formValidator",function(){return{require:"ngModel",link:function(t,i,o,r){t.$watch(o.formValidator,function(t){i[0].setCustomValidity(t),r.$setValidity("formValidator",!t)})}}});
"use strict";angular.module("jamestownChicken").factory("Auth",["$http","$location","$window","$state","$rootScope",function(e,n,o,a,t){var s=function(n,s,i){e.post("api/signup",{username:n,password:s,email:i}).then(function(e){e.data.duplicateUser&&(alert("username already taken, please choose a new one"),a.go("signup")),e.data.duplicateEmail&&(alert("email already in use, please choose a new one"),a.go("signup")),o.localStorage.accessToken=e.data.token}),t.loggedIn=!0,a.go("home")},i=function(n,s){e.post("api/signin",{username:n,password:s}).then(function(e){e.data.usernone&&(alert("user not found"),a.go("signin")),o.localStorage.accessToken=e.data.token}),t.loggedIn=!0,a.go("home")},c=function(){o.localStorage.accessToken="",t.loggedIn=!1},u=function(){return!!o.localStorage.getItem("accessToken")};return{signup:s,signin:i,isAuthLite:u,signout:c}}]);